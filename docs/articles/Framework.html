<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1">



<title>Framework</title>



<style type="text/css">code{white-space: pre;}</style>
<style type="text/css" data-origin="pandoc">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    for (var j = 0; j < rules.length; j++) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") continue;
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') continue;
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>



<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#header {
text-align: center;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; }  code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>




</head>

<body>




<h1 class="title toc-ignore">Framework</h1>



<div id="vorwort" class="section level2">
<h2>Vorwort</h2>
<p>Da ich am 01.10 eine neue Stelle als Java Entwickler bei einer Bank angetreten habe und mich beruflich mit Datenbank Anwendungen und ORM (englisch object-relational mapping) beschäftige, habe ich das Projekt genutzt, um mich dieser Thematik in R anzunehmen. Neben der reinen (Objektorientierten) Programmierung stand dabei die Softwarepaketierung im Fokus. Dafür habe ich das Projekt als eigenständiges Paket umgesetzt und für die weitere Distribution auf Github hochgeladen.</p>
<p>Die kommentierung von Code habe ich aus Übersichtsgründen weggelassen und dafür mehr Aufwand in die Benennung von (sprechenden) Variablen und grundlegender Paketarchitektur aufgebracht. Des Weiteren kann mit ?rdao::DieKlasse die Hilfe aufgerufen werden. Zeitlich war es mir leider nicht möglich, die Hilfe der einzelnen Klassen inhaltlich zu füllen.</p>
<p>Aus technischen Gründen musste ich während der Entwicklung von einer Access Datenbank abweichen. Alternativ habe ich daher aus dem Diamond Datensatz eine .db Datei erstellt und diese unter “rdao/db files external/Diamonds.db” auf Github abgelegt. Der originale Datensatz kann dem Paket nach dem Laden mit rdao::diamonds (siehe ?rdao::diamonds) entnommen werden.</p>
</div>
<div id="installation" class="section level2">
<h2>Installation</h2>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="co"># helper</span></a>
<a class="sourceLine" id="cb1-2" data-line-number="2">installer &lt;-<span class="st"> </span><span class="cf">function</span>(pkg){</a>
<a class="sourceLine" id="cb1-3" data-line-number="3">  new.pkg &lt;-<span class="st"> </span>pkg[<span class="op">!</span>(pkg <span class="op">%in%</span><span class="st"> </span><span class="kw">installed.packages</span>()[, <span class="st">&quot;Package&quot;</span>])]</a>
<a class="sourceLine" id="cb1-4" data-line-number="4">  <span class="cf">if</span> (<span class="kw">length</span>(new.pkg))</a>
<a class="sourceLine" id="cb1-5" data-line-number="5">    <span class="kw">install.packages</span>(new.pkg, <span class="dt">dependencies =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb1-6" data-line-number="6">  <span class="kw">sapply</span>(pkg, require, <span class="dt">character.only =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb1-7" data-line-number="7">}</a>
<a class="sourceLine" id="cb1-8" data-line-number="8">packages&lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;devtools&quot;</span>,<span class="st">&quot;R6&quot;</span>,<span class="st">&quot;DBI&quot;</span>)</a>
<a class="sourceLine" id="cb1-9" data-line-number="9"><span class="kw">installer</span>(packages)</a>
<a class="sourceLine" id="cb1-10" data-line-number="10"><span class="co">#&gt; Loading required package: devtools</span></a>
<a class="sourceLine" id="cb1-11" data-line-number="11"><span class="co">#&gt; Loading required package: usethis</span></a>
<a class="sourceLine" id="cb1-12" data-line-number="12"><span class="co">#&gt; Loading required package: R6</span></a>
<a class="sourceLine" id="cb1-13" data-line-number="13"><span class="co">#&gt; Loading required package: DBI</span></a>
<a class="sourceLine" id="cb1-14" data-line-number="14"><span class="co">#&gt; devtools       R6      DBI </span></a>
<a class="sourceLine" id="cb1-15" data-line-number="15"><span class="co">#&gt;     TRUE     TRUE     TRUE</span></a>
<a class="sourceLine" id="cb1-16" data-line-number="16">devtools<span class="op">::</span><span class="kw">install_github</span>(<span class="st">&quot;Chrisnice89/rdao&quot;</span>)</a>
<a class="sourceLine" id="cb1-17" data-line-number="17"><span class="co">#&gt; Skipping install of 'rdao' from a github remote, the SHA1 (8060fc95) has not changed since last install.</span></a>
<a class="sourceLine" id="cb1-18" data-line-number="18"><span class="co">#&gt;   Use `force = TRUE` to force installation</span></a></code></pre></div>
</div>
<div id="basics" class="section level2">
<h2>Basics</h2>
<p>Laden des Pakets</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="kw">library</span>(rdao)</a>
<a class="sourceLine" id="cb2-2" data-line-number="2"><span class="co">#&gt; This package ist created,developed and copyrighted by Christoph Nitz.</span></a>
<a class="sourceLine" id="cb2-3" data-line-number="3"><span class="co">#&gt; Interested parties may contact &lt;Christoph.Nitz89@gmail.com&gt;</span></a></code></pre></div>
<p>Für den Testlauf des Paketes den Pfad zur db (Gitub-Ordner: “db files external/Diamonds.db”) in einer Variablen ablegen:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1">path&lt;-<span class="st">&quot;/Users/cnitz/Dev/R/rdao/db files external/Diamonds.db&quot;</span></a></code></pre></div>
<p>Um eine Klasse aus dem Paket verwenden zu können, muss eine ‘factory()’ Funktion aufgerufen werden. Unter einer Klasse (auch Objekttyp genannt) versteht man in der objektorientierten Programmierung ein abstraktes Modell bzw. einen Bauplan für eine Reihe von ähnlichen Objekten:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1">f &lt;-<span class="st"> </span><span class="kw">connectionFactory</span>()</a>
<a class="sourceLine" id="cb4-2" data-line-number="2"><span class="co">#&gt; &lt;Validator&gt; for parent class: &lt;SqlFactory&gt; created</span></a>
<a class="sourceLine" id="cb4-3" data-line-number="3"><span class="co">#&gt; &lt;SqlFactory&gt; created</span></a>
<a class="sourceLine" id="cb4-4" data-line-number="4"><span class="kw">class</span>(f)</a>
<a class="sourceLine" id="cb4-5" data-line-number="5"><span class="co">#&gt; [1] &quot;SqlFactory&quot; &quot;R6&quot;</span></a></code></pre></div>
<p>Die <code>connectionFactory()</code> Funktion instanziert intern ein Objekt der Klasse ‘SqlFactory’. Sobald die factory geladen wurde, kann diese jederzeit wieder verwendet werden um ein korrespondierendes Objekt zu erstellen. Eigenschaften und Methoden der instanzierten Objekte können mit <code>$</code> aufgerufen werden:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1"><span class="co">#Für ein db File</span></a>
<a class="sourceLine" id="cb5-2" data-line-number="2">builder.dbFile&lt;-f<span class="op">$</span><span class="kw">dbFile</span>(path)</a>
<a class="sourceLine" id="cb5-3" data-line-number="3"><span class="co">#&gt; &lt;Validator&gt; for parent class: &lt;Builder&gt; created</span></a>
<a class="sourceLine" id="cb5-4" data-line-number="4"><span class="co">#&gt; &lt;Builder&gt; for provider: &lt;dbFile&gt; created</span></a>
<a class="sourceLine" id="cb5-5" data-line-number="5"></a>
<a class="sourceLine" id="cb5-6" data-line-number="6"><span class="kw">class</span>(builder.dbFile)</a>
<a class="sourceLine" id="cb5-7" data-line-number="7"><span class="co">#&gt; [1] &quot;Builder&quot; &quot;R6&quot;</span></a>
<a class="sourceLine" id="cb5-8" data-line-number="8"></a>
<a class="sourceLine" id="cb5-9" data-line-number="9"><span class="co">#Für eine MS Access Db</span></a>
<a class="sourceLine" id="cb5-10" data-line-number="10">builder.Access&lt;-f<span class="op">$</span><span class="kw">msAccess</span>(<span class="st">&quot;/file doesnt exisist&quot;</span>)</a>
<a class="sourceLine" id="cb5-11" data-line-number="11"><span class="co">#&gt; &lt;Validator&gt; for parent class: &lt;Builder&gt; created</span></a>
<a class="sourceLine" id="cb5-12" data-line-number="12"><span class="co">#&gt; &lt;Builder&gt; for provider: &lt;msAccess&gt; created</span></a>
<a class="sourceLine" id="cb5-13" data-line-number="13"></a>
<a class="sourceLine" id="cb5-14" data-line-number="14"><span class="co">#Für MySql / Nicht implementiert</span></a>
<a class="sourceLine" id="cb5-15" data-line-number="15">builder.mySql&lt;-f<span class="op">$</span><span class="kw">mySql</span>(<span class="dt">database =</span> <span class="st">&quot;test_db&quot;</span>,<span class="dt">uid =</span> <span class="st">&quot;mySql&quot;</span>,<span class="dt">pwd =</span> <span class="st">&quot;password&quot;</span>,<span class="dt">host =</span> <span class="st">&quot;localhost&quot;</span>,<span class="dt">port =</span> <span class="dv">5432</span>)</a>
<a class="sourceLine" id="cb5-16" data-line-number="16"><span class="co">#&gt; &lt;Validator&gt; for parent class: &lt;Builder&gt; created</span></a>
<a class="sourceLine" id="cb5-17" data-line-number="17"><span class="co">#&gt; &lt;Builder&gt; for provider: &lt;mySql&gt; created</span></a></code></pre></div>
<p>Methoden und Felder (properties):</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1"><span class="co">#Methode ohne Parameterübergabe </span></a>
<a class="sourceLine" id="cb6-2" data-line-number="2">builder.dbFile<span class="op">$</span><span class="kw">addCredentials</span>()</a>
<a class="sourceLine" id="cb6-3" data-line-number="3"><span class="co">#&gt; &lt;Validator&gt; for parent class: &lt;Credentials&gt; created</span></a>
<a class="sourceLine" id="cb6-4" data-line-number="4"><span class="co">#&gt; &lt;Credentials&gt; for User: &lt;&gt; created</span></a>
<a class="sourceLine" id="cb6-5" data-line-number="5"></a>
<a class="sourceLine" id="cb6-6" data-line-number="6"><span class="co">#Methode mit Parameterübergabe</span></a>
<a class="sourceLine" id="cb6-7" data-line-number="7">builder.dbFile<span class="op">$</span><span class="kw">addCredentials</span>(<span class="dt">username =</span> <span class="st">&quot;Admin&quot;</span>,<span class="dt">password =</span> <span class="st">&quot;SesameOpen&quot;</span>)</a>
<a class="sourceLine" id="cb6-8" data-line-number="8"><span class="co">#&gt; &lt;Validator&gt; for parent class: &lt;Credentials&gt; created</span></a>
<a class="sourceLine" id="cb6-9" data-line-number="9"><span class="co">#&gt; &lt;Credentials&gt; for User: &lt;Admin&gt; created</span></a>
<a class="sourceLine" id="cb6-10" data-line-number="10"></a>
<a class="sourceLine" id="cb6-11" data-line-number="11"><span class="co">#Zugriff auf Felder ohne abschließende '()'</span></a>
<a class="sourceLine" id="cb6-12" data-line-number="12">builder.dbFile<span class="op">$</span>path</a>
<a class="sourceLine" id="cb6-13" data-line-number="13"><span class="co">#&gt; [1] &quot;/Users/cnitz/Dev/R/rdao/db files external/Diamonds.db&quot;</span></a>
<a class="sourceLine" id="cb6-14" data-line-number="14"></a>
<a class="sourceLine" id="cb6-15" data-line-number="15"><span class="co">#Zuweisung eines Wertes zu einem Feld</span></a>
<a class="sourceLine" id="cb6-16" data-line-number="16">builder.dbFile<span class="op">$</span>path&lt;-<span class="st">&quot;new path&quot;</span></a>
<a class="sourceLine" id="cb6-17" data-line-number="17">builder.dbFile<span class="op">$</span>path</a>
<a class="sourceLine" id="cb6-18" data-line-number="18"><span class="co">#&gt; [1] &quot;new path&quot;</span></a>
<a class="sourceLine" id="cb6-19" data-line-number="19">builder.dbFile<span class="op">$</span>path&lt;-path</a>
<a class="sourceLine" id="cb6-20" data-line-number="20"></a>
<a class="sourceLine" id="cb6-21" data-line-number="21"><span class="co">#Readonly Feld - Wert des Feldes kann nicht geändert werden #Error!</span></a>
<a class="sourceLine" id="cb6-22" data-line-number="22">builder.dbFile<span class="op">$</span>builderProvider</a>
<a class="sourceLine" id="cb6-23" data-line-number="23"><span class="co">#&gt; [1] &quot;dbFile&quot;</span></a>
<a class="sourceLine" id="cb6-24" data-line-number="24"></a>
<a class="sourceLine" id="cb6-25" data-line-number="25"><span class="co">#builder.dbFile$builderProvider&lt;-&quot;msAccess&quot;</span></a>
<a class="sourceLine" id="cb6-26" data-line-number="26"><span class="co">#Fehler in builder.dbFile$builderProvider &lt;- &quot;msAccess&quot; : </span></a>
<a class="sourceLine" id="cb6-27" data-line-number="27"><span class="co">#kann den Wert einer festgestellten Bindung für 'builderProvider' nicht ändern</span></a></code></pre></div>
<p>Methoden Verkettung:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1"><span class="kw">class</span>(builder.dbFile<span class="op">$</span>credentials)</a>
<a class="sourceLine" id="cb7-2" data-line-number="2"><span class="co">#&gt; [1] &quot;Credentials&quot; &quot;R6&quot;</span></a>
<a class="sourceLine" id="cb7-3" data-line-number="3">builder.dbFile<span class="op">$</span>credentials<span class="op">$</span>username</a>
<a class="sourceLine" id="cb7-4" data-line-number="4"><span class="co">#&gt; [1] &quot;Admin&quot;</span></a></code></pre></div>
<p>Unter Method chaining (engl. chaining = Verkettung) wird in der Welt der objektorientierten Programmierung (OOP) eine spezielle Syntax verstanden, die das Ausführen einer Reihe von Methoden eines Objektes beschreibt.</p>
</div>
<div id="anwendung" class="section level2">
<h2>Anwendung</h2>
<p>Data Access Object (DAO, englisch für Datenzugriffsobjekt) ist ein Entwurfsmuster, das den Zugriff auf unterschiedliche Arten von Datenquellen (z. B. Datenbanken, Dateisystem) so kapselt, dass die angesprochene Datenquelle ausgetauscht werden kann, ohne dass der aufrufende Code geändert werden muss. Dadurch soll die eigentliche Programmlogik von technischen Details der Datenspeicherung befreit werden und flexibler einsetzbar sein. DAO ist also ein Muster für die Gestaltung von Programmierschnittstellen (APIs).</p>
<p>Die konkrete Implementierung der Objekte wurde mit Hilfe von R6 Klassen umgesetzt. Aus programmatischen Gründen wurde dabei gänzlich auf aktive Bindungen innerhalb der Klassen verzichtet. Des Weiteren wird im Kern für die Kommunikation zwischen Datenbank(en) und der Anwednung auf das DBI Interface zurückgegriffen.</p>
<div id="eigenschaften" class="section level3">
<h3>Eigenschaften</h3>
<ul>
<li>DAOs abstrahieren den Zugriff auf Datenbanken nicht vollständig, da sie nicht für die Transformation der Daten in die Struktur der Datenbank verantwortlich sind.</li>
<li>DAOs sind jeweils für ein spezielles Speichermedium optimiert. Der Zugriff auf dieses Medium wird über das vom DAO vorgegebene bzw. zu implementierende API vorgenommen.</li>
<li>DAOs minimieren den Portierungsaufwand einer Anwendung beim Wechsel des Speichermediums.</li>
</ul>
<p>Die Methoden der <code>SqlFactory</code> instanzieren intern ein Objekt vom Typ ‘Builder’. Der Erbauer (englisch builder) ist ein Entwurfsmuster (buildern pattern) aus dem Bereich der Softwareentwicklung. Es gehört zur Kategorie der Erzeugungsmuster und trennt die Konstruktion komplexer Objekte von deren Repräsentationen, wodurch dieselben Konstruktionsprozesse wiederverwendet werden können.</p>
<p>Der Einsatz des Erbauer-Entwurfsmusters bietet sich an, wenn</p>
<p><strong>1</strong> Zu einem komplexen Objekt unterschiedliche Repräsentationen existieren sollen</p>
<p><strong>2</strong> Die Konstruktion eines komplexen Objekts unabhängig von der Erzeugung der Bestandteile sein soll</p>
<p><strong>3</strong> Der Konstruktionsablauf einen internen Zustand erfordert, der vor einem Klienten verborgen werden soll</p>
<p>Erstellen einer Verbindung mit<code>builder$build()</code></p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" data-line-number="1">connection.dbFile&lt;-builder.dbFile<span class="op">$</span><span class="kw">build</span>()</a>
<a class="sourceLine" id="cb8-2" data-line-number="2"><span class="co">#&gt; &lt;Validator&gt; for parent class: &lt;SqlConnection&gt; created</span></a>
<a class="sourceLine" id="cb8-3" data-line-number="3"><span class="co">#&gt; &lt;SqlConnection&gt;&gt; for provider: &lt;dbFile&gt; created</span></a>
<a class="sourceLine" id="cb8-4" data-line-number="4"></a>
<a class="sourceLine" id="cb8-5" data-line-number="5"><span class="kw">class</span>(connection.dbFile)</a>
<a class="sourceLine" id="cb8-6" data-line-number="6"><span class="co">#&gt; [1] &quot;SqlConnection&quot;          &quot;Abstrakt SqlConnection&quot;</span></a>
<a class="sourceLine" id="cb8-7" data-line-number="7"><span class="co">#&gt; [3] &quot;R6&quot;</span></a>
<a class="sourceLine" id="cb8-8" data-line-number="8"></a>
<a class="sourceLine" id="cb8-9" data-line-number="9"><span class="co">#connection.Accees&lt;-builder.Access$build()</span></a>
<a class="sourceLine" id="cb8-10" data-line-number="10"><span class="co">#Fehler: &lt;Builder&gt;</span></a>
<a class="sourceLine" id="cb8-11" data-line-number="11"><span class="co">#Proc: &lt;build()&gt;</span></a>
<a class="sourceLine" id="cb8-12" data-line-number="12"><span class="co">#Beschreibung: &lt;Ungültiger Pfad &quot;/file doesnt exisist&quot;&gt; </span></a>
<a class="sourceLine" id="cb8-13" data-line-number="13"></a>
<a class="sourceLine" id="cb8-14" data-line-number="14"><span class="co">#connection.dbFile&lt;-builder.mySql$build()</span></a>
<a class="sourceLine" id="cb8-15" data-line-number="15"><span class="co">#Fehler: &lt;Builder&gt;</span></a>
<a class="sourceLine" id="cb8-16" data-line-number="16"><span class="co">#Proc: &lt;build()&gt;</span></a>
<a class="sourceLine" id="cb8-17" data-line-number="17"><span class="co">#Beschreibung: &lt;Noch nicht implementiert: mySql&gt; </span></a></code></pre></div>
<p>Der Konstruktionsprozess wird an einer dedizierten Stelle (im <code>Builder</code>) gesteuert; spätere Änderungen – etwa ein Mehrphasen-Konstruktionsprozess statt einer Einphasen-Konstruktion – lassen sich ohne Änderung der Klienten realisieren. Es besteht eine enge Kopplung zwischen Produkt, konkretem Erbauer und den am Konstruktionsprozess beteiligten Klassen (hier die <code>SqlFactory</code> als Direktor).</p>
</div>
</div>
<div id="die-verbindung" class="section level2">
<h2>Die Verbindung</h2>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" data-line-number="1">connection.dbFile<span class="op">$</span><span class="kw">isConnected</span>()</a>
<a class="sourceLine" id="cb9-2" data-line-number="2"><span class="co">#&gt; [1] FALSE</span></a>
<a class="sourceLine" id="cb9-3" data-line-number="3">connection.dbFile<span class="op">$</span><span class="kw">connect</span>()</a>
<a class="sourceLine" id="cb9-4" data-line-number="4"><span class="co">#&gt; [1] TRUE</span></a>
<a class="sourceLine" id="cb9-5" data-line-number="5">connection.dbFile<span class="op">$</span><span class="kw">isConnected</span>()</a>
<a class="sourceLine" id="cb9-6" data-line-number="6"><span class="co">#&gt; [1] TRUE</span></a>
<a class="sourceLine" id="cb9-7" data-line-number="7">connection.dbFile<span class="op">$</span><span class="kw">disconnect</span>()</a>
<a class="sourceLine" id="cb9-8" data-line-number="8"><span class="co">#&gt; [1] TRUE</span></a>
<a class="sourceLine" id="cb9-9" data-line-number="9">connection.dbFile<span class="op">$</span><span class="kw">isConnected</span>()</a>
<a class="sourceLine" id="cb9-10" data-line-number="10"><span class="co">#&gt; [1] FALSE</span></a></code></pre></div>
<p>Die SqlConnection Klasse verwendet in seinem Nucleus das R Paket DBI. Im Gegensatz zu diesem erzeugt der Builder aber per default eine geschlossene Verbindung. Diese kann explizit per <code>connect()</code> geöffnet oder <code>disconnect()</code> geschlossen werden. Weitere Details zum Verhalten der Connection Klasse werden im nächsten Abschnitt näher erläutert. Die Methoden zum steuern der der Verbindung geben jeweils einen boolean Wert als Indikator zurück.</p>
</div>
<div id="abfragen" class="section level2">
<h2>Abfragen</h2>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" data-line-number="1">query&lt;-connection.dbFile<span class="op">$</span><span class="kw">createQuery</span>(<span class="dt">sql =</span> <span class="st">&quot;SELECT * FROM diamonds&quot;</span>)</a>
<a class="sourceLine" id="cb10-2" data-line-number="2"><span class="co">#&gt; &lt;Validator&gt; for parent class: &lt;SqlCommand&gt; created</span></a>
<a class="sourceLine" id="cb10-3" data-line-number="3"><span class="co">#&gt; &lt;SqlCommand&gt; :: &lt;SELECT * FROM diamonds&gt;</span></a>
<a class="sourceLine" id="cb10-4" data-line-number="4"><span class="co">#&gt; for provider: &lt;dbFile&gt; created</span></a>
<a class="sourceLine" id="cb10-5" data-line-number="5"></a>
<a class="sourceLine" id="cb10-6" data-line-number="6"><span class="kw">class</span>(query)</a>
<a class="sourceLine" id="cb10-7" data-line-number="7"><span class="co">#&gt; [1] &quot;SqlCommand&quot;          &quot;Abstrakt SqlCommand&quot; &quot;R6&quot;</span></a>
<a class="sourceLine" id="cb10-8" data-line-number="8"></a>
<a class="sourceLine" id="cb10-9" data-line-number="9">query<span class="op">$</span>provider</a>
<a class="sourceLine" id="cb10-10" data-line-number="10"><span class="co">#&gt; [1] &quot;dbFile&quot;</span></a>
<a class="sourceLine" id="cb10-11" data-line-number="11"></a>
<a class="sourceLine" id="cb10-12" data-line-number="12">query<span class="op">$</span>sql</a>
<a class="sourceLine" id="cb10-13" data-line-number="13"><span class="co">#&gt; [1] &quot;SELECT * FROM diamonds&quot;</span></a>
<a class="sourceLine" id="cb10-14" data-line-number="14"></a>
<a class="sourceLine" id="cb10-15" data-line-number="15"><span class="co">#query$sql&lt;-&quot;SELECT * FROM diamonds&quot;</span></a>
<a class="sourceLine" id="cb10-16" data-line-number="16"><span class="co">#Fehler in query$sql &lt;- &quot;SELECT * FROM emeralds&quot; : </span></a>
<a class="sourceLine" id="cb10-17" data-line-number="17"><span class="co">#kann den Wert einer festgestellten Bindung für 'sql' nicht ändern</span></a></code></pre></div>
<p>Mit <code>createQuery()</code> instanziiert die <code>SqlConnection</code> ein SqlCommand. Die Klasse dient als CRUD (Create, Read, Update, Delete) Interface. Die aktuelle Implementierung kann SQL Statements nur als Konkatenation verarbeiten. Um SQL-Injection (dt. SQL-Einschleusung) zu unterbinden sowie die Flexibilität zu erhöhen, könnte in einem zukünftigen Release parametrisierte Abfragen implementiert werden.</p>
<p>Im Vergleich:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" data-line-number="1">quality&lt;-<span class="st">&quot;Premium&quot;</span></a>
<a class="sourceLine" id="cb11-2" data-line-number="2"></a>
<a class="sourceLine" id="cb11-3" data-line-number="3"><span class="co">#quality&lt;-&quot;Premium&quot;</span></a>
<a class="sourceLine" id="cb11-4" data-line-number="4">query.premium&lt;-connection.dbFile<span class="op">$</span><span class="kw">createQuery</span>(<span class="dt">sql =</span> <span class="st">&quot;SELECT * FROM diamonds WHERE cut=?&quot;</span>)</a>
<a class="sourceLine" id="cb11-5" data-line-number="5"><span class="co">#&gt; &lt;Validator&gt; for parent class: &lt;SqlCommand&gt; created</span></a>
<a class="sourceLine" id="cb11-6" data-line-number="6"><span class="co">#&gt; &lt;SqlCommand&gt; :: &lt;SELECT * FROM diamonds WHERE cut=?&gt;</span></a>
<a class="sourceLine" id="cb11-7" data-line-number="7"><span class="co">#&gt; for provider: &lt;dbFile&gt; created</span></a>
<a class="sourceLine" id="cb11-8" data-line-number="8"><span class="co">#qquery.premium$addParameter(name=&quot;quality&quot;, value= quality)</span></a>
<a class="sourceLine" id="cb11-9" data-line-number="9">query.premium<span class="op">$</span>sql</a>
<a class="sourceLine" id="cb11-10" data-line-number="10"><span class="co">#&gt; [1] &quot;SELECT * FROM diamonds WHERE cut=?&quot;</span></a>
<a class="sourceLine" id="cb11-11" data-line-number="11"></a>
<a class="sourceLine" id="cb11-12" data-line-number="12">query.premium&lt;-connection.dbFile<span class="op">$</span><span class="kw">createQuery</span>(<span class="dt">sql =</span> <span class="kw">paste</span>(<span class="st">&quot;SELECT * FROM diamonds WHERE cut='&quot;</span>,quality,<span class="st">&quot;'&quot;</span>,<span class="dt">sep=</span><span class="st">&quot;&quot;</span>))</a>
<a class="sourceLine" id="cb11-13" data-line-number="13"><span class="co">#&gt; &lt;Validator&gt; for parent class: &lt;SqlCommand&gt; created</span></a>
<a class="sourceLine" id="cb11-14" data-line-number="14"><span class="co">#&gt; &lt;SqlCommand&gt; :: &lt;SELECT * FROM diamonds WHERE cut='Premium'&gt;</span></a>
<a class="sourceLine" id="cb11-15" data-line-number="15"><span class="co">#&gt; for provider: &lt;dbFile&gt; created</span></a>
<a class="sourceLine" id="cb11-16" data-line-number="16">query.premium<span class="op">$</span>sql</a>
<a class="sourceLine" id="cb11-17" data-line-number="17"><span class="co">#&gt; [1] &quot;SELECT * FROM diamonds WHERE cut='Premium'&quot;</span></a></code></pre></div>
<p>Mit <code>createQuery()</code> instanziiert die <code>SqlConnection</code> ein SqlCommand. Die Klasse dient als CRUD (Create, Read, Update, Delete) Interface. Die aktuelle Implementierung kann SQL Statements nur als Konkatenation verarbeiten. Um SQL-Injection (dt. SQL-Einschleusung) zu unterbinden sowie die Flexibilität zu erhöhen, könnte in einem zukünftigen Release parametrisierte Abfragen implementiert werden. Darauf aufbauend kann das SqlCommand dann um die Möglichkeit des Prepared Statements erweitert werden. Ein Prepared Statement ist eine sogenannte vorbereitete Anweisung für ein Datenbanksystem. Im Gegensatz zu gewöhnlichen Statements enthält es noch keine Parameterwerte. Stattdessen werden dem Datenbanksystem Platzhalter übergeben. Soll ein Statement mit unterschiedlichen Parametern mehrere Male (z. B. innerhalb einer Schleife) auf dem Datenbanksystem ausgeführt werden, können Prepared Statements einen Geschwindigkeitsvorteil bringen, da das Statement schon vorübersetzt im Datenbanksystem vorliegt und nur noch mit den neuen Parametern ausgeführt werden muss.</p>
</div>
<div id="ergebniss-einer-abfrage" class="section level2">
<h2>Ergebniss einer Abfrage</h2>
<p>Mit <code>fetch()</code> wird die Query ausgeführt und die <code>SqlConnection</code> liefert über das <code>SqlCommand</code> Interface ein Objekt der Klasse <code>SqlResult</code> zurück. Handelt es sich bei der Abfrage um eine SQL-Aktionsabfrage, bspw.ein “INSERT” oder “DELETE” wird die Query mit dem Befehl <code>execute()</code> ausgeführt und als Ergebnis wird die Anzahl der vom SQL-Statement betroffenen Datensätze zurück geliefert.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" data-line-number="1">result&lt;-query<span class="op">$</span><span class="kw">fetch</span>()</a>
<a class="sourceLine" id="cb12-2" data-line-number="2"><span class="co">#&gt; &lt;Validator&gt; for parent class: &lt;SqlResult&gt; created</span></a>
<a class="sourceLine" id="cb12-3" data-line-number="3"><span class="co">#&gt; &lt;SqlCommand&gt; :: &lt;SELECT * FROM diamonds&gt;</span></a>
<a class="sourceLine" id="cb12-4" data-line-number="4"><span class="co">#&gt; for provider: &lt;dbFile&gt; ausgeführt</span></a>
<a class="sourceLine" id="cb12-5" data-line-number="5"></a>
<a class="sourceLine" id="cb12-6" data-line-number="6">result<span class="op">$</span><span class="kw">rows</span>()</a>
<a class="sourceLine" id="cb12-7" data-line-number="7"><span class="co">#&gt; [1] 53940</span></a>
<a class="sourceLine" id="cb12-8" data-line-number="8"></a>
<a class="sourceLine" id="cb12-9" data-line-number="9"><span class="kw">class</span>(result)</a>
<a class="sourceLine" id="cb12-10" data-line-number="10"><span class="co">#&gt; [1] &quot;SqlResult&quot; &quot;R6&quot;</span></a></code></pre></div>
<p>Mit <code>data</code> kann direkt auf die Daten zugegriffen werden:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" data-line-number="1"><span class="co">#(Achtung Feld Zugriff)</span></a>
<a class="sourceLine" id="cb13-2" data-line-number="2"><span class="kw">head</span>(result<span class="op">$</span>data)</a>
<a class="sourceLine" id="cb13-3" data-line-number="3"><span class="co">#&gt;   carat       cut color clarity depth table price    x    y    z</span></a>
<a class="sourceLine" id="cb13-4" data-line-number="4"><span class="co">#&gt; 1  0.23     Ideal     E     SI2  61.5    55   326 3.95 3.98 2.43</span></a>
<a class="sourceLine" id="cb13-5" data-line-number="5"><span class="co">#&gt; 2  0.21   Premium     E     SI1  59.8    61   326 3.89 3.84 2.31</span></a>
<a class="sourceLine" id="cb13-6" data-line-number="6"><span class="co">#&gt; 3  0.23      Good     E     VS1  56.9    65   327 4.05 4.07 2.31</span></a>
<a class="sourceLine" id="cb13-7" data-line-number="7"><span class="co">#&gt; 4  0.29   Premium     I     VS2  62.4    58   334 4.20 4.23 2.63</span></a>
<a class="sourceLine" id="cb13-8" data-line-number="8"><span class="co">#&gt; 5  0.31      Good     J     SI2  63.3    58   335 4.34 4.35 2.75</span></a>
<a class="sourceLine" id="cb13-9" data-line-number="9"><span class="co">#&gt; 6  0.24 Very Good     J    VVS2  62.8    57   336 3.94 3.96 2.48</span></a>
<a class="sourceLine" id="cb13-10" data-line-number="10"></a>
<a class="sourceLine" id="cb13-11" data-line-number="11"><span class="co">#result$data&lt;-NULL</span></a>
<a class="sourceLine" id="cb13-12" data-line-number="12"><span class="co">#Fehler in result$data &lt;- NULL : </span></a>
<a class="sourceLine" id="cb13-13" data-line-number="13"><span class="co">#kann den Wert einer festgestellten Bindung für 'data' nicht ändern</span></a></code></pre></div>
</div>
<div id="verhalten-der-verbindung-bei-einer-abfrage" class="section level2">
<h2>Verhalten der Verbindung bei einer Abfrage</h2>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" data-line-number="1">connection.dbFile<span class="op">$</span><span class="kw">isConnected</span>()</a>
<a class="sourceLine" id="cb14-2" data-line-number="2"><span class="co">#&gt; [1] FALSE</span></a>
<a class="sourceLine" id="cb14-3" data-line-number="3"></a>
<a class="sourceLine" id="cb14-4" data-line-number="4">result.premium&lt;-query.premium<span class="op">$</span><span class="kw">fetch</span>(<span class="dt">disconnect =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb14-5" data-line-number="5"><span class="co">#&gt; &lt;Validator&gt; for parent class: &lt;SqlResult&gt; created</span></a>
<a class="sourceLine" id="cb14-6" data-line-number="6"><span class="co">#&gt; &lt;SqlCommand&gt; :: &lt;SELECT * FROM diamonds WHERE cut='Premium'&gt;</span></a>
<a class="sourceLine" id="cb14-7" data-line-number="7"><span class="co">#&gt; for provider: &lt;dbFile&gt; ausgeführt</span></a>
<a class="sourceLine" id="cb14-8" data-line-number="8"></a>
<a class="sourceLine" id="cb14-9" data-line-number="9">connection.dbFile<span class="op">$</span><span class="kw">isConnected</span>()</a>
<a class="sourceLine" id="cb14-10" data-line-number="10"><span class="co">#&gt; [1] FALSE</span></a>
<a class="sourceLine" id="cb14-11" data-line-number="11"></a>
<a class="sourceLine" id="cb14-12" data-line-number="12"><span class="kw">head</span>(result.premium<span class="op">$</span>data)</a>
<a class="sourceLine" id="cb14-13" data-line-number="13"><span class="co">#&gt;   carat     cut color clarity depth table price    x    y    z</span></a>
<a class="sourceLine" id="cb14-14" data-line-number="14"><span class="co">#&gt; 1  0.21 Premium     E     SI1  59.8    61   326 3.89 3.84 2.31</span></a>
<a class="sourceLine" id="cb14-15" data-line-number="15"><span class="co">#&gt; 2  0.29 Premium     I     VS2  62.4    58   334 4.20 4.23 2.63</span></a>
<a class="sourceLine" id="cb14-16" data-line-number="16"><span class="co">#&gt; 3  0.22 Premium     F     SI1  60.4    61   342 3.88 3.84 2.33</span></a>
<a class="sourceLine" id="cb14-17" data-line-number="17"><span class="co">#&gt; 4  0.20 Premium     E     SI2  60.2    62   345 3.79 3.75 2.27</span></a>
<a class="sourceLine" id="cb14-18" data-line-number="18"><span class="co">#&gt; 5  0.32 Premium     E      I1  60.9    58   345 4.38 4.42 2.68</span></a>
<a class="sourceLine" id="cb14-19" data-line-number="19"><span class="co">#&gt; 6  0.24 Premium     I     VS1  62.5    57   355 3.97 3.94 2.47</span></a></code></pre></div>
<p>Die Verbindung wird nur für einen Task geöffnet und anschließend sofort wieder geschlossen. Der optionale Steuerungsparameter <code>disconnect</code> ist per default auf TRUE gesetzt.</p>
</div>
<div id="testlauf" class="section level2">
<h2>Testlauf</h2>
<p>Objektorientierte Programmiersprachen (OOP) kapseln Daten und Verhalten in Objekten, hingegen legen relationale Datenbanken Daten in Tabellen ab. Die beiden Paradigmen sind grundlegend verschieden. So kapseln Objekte ihren Zustand und ihr Verhalten hinter einer Schnittstelle und haben eine eindeutige Identität.</p>
<p>Für den Testlauf wird der diamonds Datensatz verwendet und beispielhaft eine einfache (fiktive) Geschäftslogik bestehend aus einer Tabelle sowie nur lesenden Aufgaben angenommen.</p>
<p>Im Testlauf soll exemplarisch dargestellt werden, welche Möglichkeiten R im Bereich der Objektorientierten Programmierung bietet und wie eine größere Datenbank Anwendung strukturiert nach den Grundsätzen der Objektorientierung implementiert werden könnte.</p>
</div>
<div id="geschäftslogik" class="section level2">
<h2>Geschäftslogik</h2>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb15-1" data-line-number="1">business&lt;-<span class="kw">diamondsFactory</span>(connection.dbFile)</a>
<a class="sourceLine" id="cb15-2" data-line-number="2"><span class="co">#&gt; &lt;Validator&gt; for parent class: &lt;Diamonds interface&gt; created</span></a>
<a class="sourceLine" id="cb15-3" data-line-number="3"><span class="co">#&gt; &lt;Validator&gt; for parent class: &lt;Diamonds interface&gt; created</span></a>
<a class="sourceLine" id="cb15-4" data-line-number="4"><span class="co">#&gt; &lt;Validator&gt; for parent class: &lt;HashMap&gt; created</span></a>
<a class="sourceLine" id="cb15-5" data-line-number="5"><span class="co">#&gt; &lt;Validator&gt; for parent class: &lt;HashMap&gt; created</span></a>
<a class="sourceLine" id="cb15-6" data-line-number="6"></a>
<a class="sourceLine" id="cb15-7" data-line-number="7"><span class="kw">class</span>(business)</a>
<a class="sourceLine" id="cb15-8" data-line-number="8"><span class="co">#&gt; [1] &quot;Diamonds interface&quot;     &quot;Abstrakt businessLogic&quot;</span></a>
<a class="sourceLine" id="cb15-9" data-line-number="9"><span class="co">#&gt; [3] &quot;R6&quot;</span></a>
<a class="sourceLine" id="cb15-10" data-line-number="10"></a>
<a class="sourceLine" id="cb15-11" data-line-number="11">diamonds.best&lt;-business<span class="op">$</span><span class="kw">loadBestQuality</span>()</a>
<a class="sourceLine" id="cb15-12" data-line-number="12"><span class="co">#&gt; &lt;Validator&gt; for parent class: &lt;SqlCommand&gt; created</span></a>
<a class="sourceLine" id="cb15-13" data-line-number="13"><span class="co">#&gt; &lt;SqlCommand&gt; :: &lt;SELECT * FROM diamonds WHERE cut = 'Very Good'&gt;</span></a>
<a class="sourceLine" id="cb15-14" data-line-number="14"><span class="co">#&gt; for provider: &lt;dbFile&gt; created </span></a>
<a class="sourceLine" id="cb15-15" data-line-number="15"><span class="co">#&gt; &lt;Validator&gt; for parent class: &lt;SqlResult&gt; created</span></a>
<a class="sourceLine" id="cb15-16" data-line-number="16"><span class="co">#&gt; &lt;SqlCommand&gt; :: &lt;SELECT * FROM diamonds WHERE cut = 'Very Good'&gt;</span></a>
<a class="sourceLine" id="cb15-17" data-line-number="17"><span class="co">#&gt; for provider: &lt;dbFile&gt; ausgeführt</span></a>
<a class="sourceLine" id="cb15-18" data-line-number="18"></a>
<a class="sourceLine" id="cb15-19" data-line-number="19"><span class="kw">head</span>(diamonds.best<span class="op">$</span>data)</a>
<a class="sourceLine" id="cb15-20" data-line-number="20"><span class="co">#&gt;   carat       cut color clarity depth table price    x    y    z</span></a>
<a class="sourceLine" id="cb15-21" data-line-number="21"><span class="co">#&gt; 1  0.24 Very Good     J    VVS2  62.8    57   336 3.94 3.96 2.48</span></a>
<a class="sourceLine" id="cb15-22" data-line-number="22"><span class="co">#&gt; 2  0.24 Very Good     I    VVS1  62.3    57   336 3.95 3.98 2.47</span></a>
<a class="sourceLine" id="cb15-23" data-line-number="23"><span class="co">#&gt; 3  0.26 Very Good     H     SI1  61.9    55   337 4.07 4.11 2.53</span></a>
<a class="sourceLine" id="cb15-24" data-line-number="24"><span class="co">#&gt; 4  0.23 Very Good     H     VS1  59.4    61   338 4.00 4.05 2.39</span></a>
<a class="sourceLine" id="cb15-25" data-line-number="25"><span class="co">#&gt; 5  0.30 Very Good     J     SI1  62.7    59   351 4.21 4.27 2.66</span></a>
<a class="sourceLine" id="cb15-26" data-line-number="26"><span class="co">#&gt; 6  0.23 Very Good     E     VS2  63.8    55   352 3.85 3.92 2.48</span></a>
<a class="sourceLine" id="cb15-27" data-line-number="27"></a>
<a class="sourceLine" id="cb15-28" data-line-number="28">diamonds.selected&lt;-business<span class="op">$</span><span class="kw">loadColumns</span>(<span class="st">&quot;carat&quot;</span>,<span class="st">&quot;color&quot;</span>)</a>
<a class="sourceLine" id="cb15-29" data-line-number="29"><span class="co">#&gt; &lt;Validator&gt; for parent class: &lt;SqlCommand&gt; created</span></a>
<a class="sourceLine" id="cb15-30" data-line-number="30"><span class="co">#&gt; &lt;SqlCommand&gt; :: &lt;SELECT carat FROM diamonds&gt;</span></a>
<a class="sourceLine" id="cb15-31" data-line-number="31"><span class="co">#&gt; for provider: &lt;dbFile&gt; created </span></a>
<a class="sourceLine" id="cb15-32" data-line-number="32"><span class="co">#&gt; &lt;Validator&gt; for parent class: &lt;SqlResult&gt; created</span></a>
<a class="sourceLine" id="cb15-33" data-line-number="33"><span class="co">#&gt; &lt;SqlCommand&gt; :: &lt;SELECT carat FROM diamonds&gt;</span></a>
<a class="sourceLine" id="cb15-34" data-line-number="34"><span class="co">#&gt; for provider: &lt;dbFile&gt; ausgeführt</span></a>
<a class="sourceLine" id="cb15-35" data-line-number="35"></a>
<a class="sourceLine" id="cb15-36" data-line-number="36"><span class="kw">head</span>(diamonds.selected<span class="op">$</span>data)</a>
<a class="sourceLine" id="cb15-37" data-line-number="37"><span class="co">#&gt;   carat</span></a>
<a class="sourceLine" id="cb15-38" data-line-number="38"><span class="co">#&gt; 1  0.23</span></a>
<a class="sourceLine" id="cb15-39" data-line-number="39"><span class="co">#&gt; 2  0.21</span></a>
<a class="sourceLine" id="cb15-40" data-line-number="40"><span class="co">#&gt; 3  0.23</span></a>
<a class="sourceLine" id="cb15-41" data-line-number="41"><span class="co">#&gt; 4  0.29</span></a>
<a class="sourceLine" id="cb15-42" data-line-number="42"><span class="co">#&gt; 5  0.31</span></a>
<a class="sourceLine" id="cb15-43" data-line-number="43"><span class="co">#&gt; 6  0.24</span></a></code></pre></div>
<p>Innerhalb der Businesslogik werden die relationen Zusammenhänge der zugrundeligenden Datenbank implementiert. Die Businesslogik kann um komplexe SQL-Abfragen über meherere Tabellen sowie weiterverarbeitende, Clientseitige Dunkelverabreitung erweitert werden. Beispiel: Kreditdaten kommen aus der Datenbank in der Businesslogik an, fließen in der Businesslogik in ein Prognosemodell und werden dann erst ans Frontend geliefert.</p>
</div>
<div id="errorhandling" class="section level2">
<h2>Errorhandling</h2>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb16-1" data-line-number="1">diamonds.lowbudget&lt;-business<span class="op">$</span><span class="kw">loadQuality</span>(<span class="st">&quot;Poor&quot;</span>,<span class="st">&quot;Fair&quot;</span>, <span class="st">&quot;Good&quot;</span>)</a>
<a class="sourceLine" id="cb16-2" data-line-number="2"><span class="co">#&gt; Warning: &lt;Diamonds interface&gt;</span></a>
<a class="sourceLine" id="cb16-3" data-line-number="3"><span class="co">#&gt; Proc: &lt;loadQuality()&gt;</span></a>
<a class="sourceLine" id="cb16-4" data-line-number="4"><span class="co">#&gt; Beschreibung: &lt;Nur folgende Qualitäten können abgefragt werden: Fair;Good;Ideal;Premium;Very Good&gt;</span></a>
<a class="sourceLine" id="cb16-5" data-line-number="5"></a>
<a class="sourceLine" id="cb16-6" data-line-number="6">diamonds.lowbudget&lt;-business<span class="op">$</span><span class="kw">loadQuality</span>(<span class="st">&quot;Fair&quot;</span>, <span class="st">&quot;Good&quot;</span>)</a>
<a class="sourceLine" id="cb16-7" data-line-number="7"><span class="co">#&gt; &lt;Validator&gt; for parent class: &lt;SqlCommand&gt; created</span></a>
<a class="sourceLine" id="cb16-8" data-line-number="8"><span class="co">#&gt; &lt;SqlCommand&gt; :: &lt;SELECT * FROM diamonds WHERE cut IN (&quot;Fair&quot;)&gt;</span></a>
<a class="sourceLine" id="cb16-9" data-line-number="9"><span class="co">#&gt; for provider: &lt;dbFile&gt; created </span></a>
<a class="sourceLine" id="cb16-10" data-line-number="10"><span class="co">#&gt; &lt;Validator&gt; for parent class: &lt;SqlResult&gt; created</span></a>
<a class="sourceLine" id="cb16-11" data-line-number="11"><span class="co">#&gt; &lt;SqlCommand&gt; :: &lt;SELECT * FROM diamonds WHERE cut IN (&quot;Fair&quot;)&gt;</span></a>
<a class="sourceLine" id="cb16-12" data-line-number="12"><span class="co">#&gt; for provider: &lt;dbFile&gt; ausgeführt</span></a>
<a class="sourceLine" id="cb16-13" data-line-number="13"></a>
<a class="sourceLine" id="cb16-14" data-line-number="14"><span class="kw">head</span>(diamonds.lowbudget<span class="op">$</span>data)</a>
<a class="sourceLine" id="cb16-15" data-line-number="15"><span class="co">#&gt;   carat  cut color clarity depth table price    x    y    z</span></a>
<a class="sourceLine" id="cb16-16" data-line-number="16"><span class="co">#&gt; 1  0.22 Fair     E     VS2  65.1    61   337 3.87 3.78 2.49</span></a>
<a class="sourceLine" id="cb16-17" data-line-number="17"><span class="co">#&gt; 2  0.86 Fair     E     SI2  55.1    69  2757 6.45 6.33 3.52</span></a>
<a class="sourceLine" id="cb16-18" data-line-number="18"><span class="co">#&gt; 3  0.96 Fair     F     SI2  66.3    62  2759 6.27 5.95 4.07</span></a>
<a class="sourceLine" id="cb16-19" data-line-number="19"><span class="co">#&gt; 4  0.70 Fair     F     VS2  64.5    57  2762 5.57 5.53 3.58</span></a>
<a class="sourceLine" id="cb16-20" data-line-number="20"><span class="co">#&gt; 5  0.70 Fair     F     VS2  65.3    55  2762 5.63 5.58 3.66</span></a>
<a class="sourceLine" id="cb16-21" data-line-number="21"><span class="co">#&gt; 6  0.91 Fair     H     SI2  64.4    57  2763 6.11 6.09 3.93</span></a></code></pre></div>
<p>Das Errorhandling wird ebenfalls in der Businesslogik abgebildet.</p>
</div>
<div id="objektrelationale-abbildung" class="section level2">
<h2>Objektrelationale Abbildung</h2>
<p>Des Weiteren kann mit Hilfe von Objekt-orientierter Programmierung und dem <code>rdao</code> framework eine Objektrelationale Abbildung dagestellt werden. Eine Objektrelationale Abbildung (englisch object-relational mapping, ORM) ist eine Technik der Softwareentwicklung, mit der ein in einer objektorientierten Programmiersprache geschriebenes Anwendungsprogramm seine Objekte in einer relationalen Datenbank ablegen kann. Dem Programm erscheint die Datenbank dann als objektorientierte Datenbank, was die Programmierung erleichtert.</p>
<p>Im einfachsten Fall werden Klassen auf Tabellen abgebildet, jedes Objekt entspricht einer Tabellenzeile und für jedes Attribut wird eine Tabellenspalte reserviert. Die Identität eines Objekts entspricht dem Primärschlüssel der Tabelle:</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb17-1" data-line-number="1">diamonds&lt;-business<span class="op">$</span><span class="kw">loadDiamonds</span>()</a>
<a class="sourceLine" id="cb17-2" data-line-number="2"><span class="co">#&gt; &lt;Validator&gt; for parent class: &lt;SqlCommand&gt; created</span></a>
<a class="sourceLine" id="cb17-3" data-line-number="3"><span class="co">#&gt; &lt;SqlCommand&gt; :: &lt;SELECT * FROM diamonds&gt;</span></a>
<a class="sourceLine" id="cb17-4" data-line-number="4"><span class="co">#&gt; for provider: &lt;dbFile&gt; created </span></a>
<a class="sourceLine" id="cb17-5" data-line-number="5"><span class="co">#&gt; &lt;Validator&gt; for parent class: &lt;SqlResult&gt; created</span></a>
<a class="sourceLine" id="cb17-6" data-line-number="6"><span class="co">#&gt; &lt;SqlCommand&gt; :: &lt;SELECT * FROM diamonds&gt;</span></a>
<a class="sourceLine" id="cb17-7" data-line-number="7"><span class="co">#&gt; for provider: &lt;dbFile&gt; ausgeführt</span></a>
<a class="sourceLine" id="cb17-8" data-line-number="8"></a>
<a class="sourceLine" id="cb17-9" data-line-number="9"><span class="kw">class</span>(diamonds)</a>
<a class="sourceLine" id="cb17-10" data-line-number="10"><span class="co">#&gt; [1] &quot;list&quot;</span></a>
<a class="sourceLine" id="cb17-11" data-line-number="11"></a>
<a class="sourceLine" id="cb17-12" data-line-number="12"><span class="kw">class</span>(diamonds[[<span class="dv">1</span>]])</a>
<a class="sourceLine" id="cb17-13" data-line-number="13"><span class="co">#&gt; [1] &quot;Diamond&quot; &quot;R6&quot;</span></a></code></pre></div>
<div id="fazit" class="section level3">
<h3>Fazit</h3>
<p>Mit dem DBI- und dem R6 Paket existieren in R mächtige Werkzeuge zum entwickeln von Objektorientierten Datenbanklösungen.</p>
<p>Die Anwendung kann als Blaupause für weitere Implementierungen dienen und vermittelt einen ersten Eindruck wie eine Objektorientierte Programmstruktur in R aussehen könnte.</p>
<p>Aufgrund der Komplexität des Themas und der im Rahmen einer Projektarbeit bemessenen Zeit verbleiben viele offene Fragen:</p>
<p>Wie könnten tatsächliche Interface implementiert werden? Wie schreibt die Anwendung das gemappte Objekt (effizient) zurück in die Datenbank? Wie könnte das SqlResult noch weiter gekapselt werden?</p>
</div>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
